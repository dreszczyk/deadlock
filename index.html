<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>test</title>
</head>

<body>
    <button id="start">start!</button>
    <div id="attrs" style="display: pre;"></div>
    <script>
        function handleDeviceMotion(event) {
            const acc = event.accelerationIncludingGravity.x + event.accelerationIncludingGravity.y + event.accelerationIncludingGravity.z;
            document.getElementById('attrs').innerText = `
${document.getElementById('attrs').innerText}
${acc}`
        }
        document.getElementById('start').addEventListener('click', () => {
            var conf = confirm("Fullscreen mode?");
            if (conf) {
                const request = document.documentElement.requestFullscreen();
                request.then(() => {
                    const lock = window.screen.orientation.lock('portrait-primary');
                    lock.then(() => {
                        alert('addEventListener');
                        window.addEventListener("devicemotion", handleDeviceMotion, true);
                        setTimeout(() => {
                            alert('removeEventListener');
                            window.removeEventListener("devicemotion", handleDeviceMotion, true);
                        }, 3000)
                    })
                });
            }
        })
    </script>
</body>

</html>
